# Kickstart file automatically generated by anaconda.

#version=centos7
install
cdrom
lang en_US.UTF-8
keyboard us
rootpw 123456
firewall --service=ssh
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone --utc Asia/Shanghai
bootloader --location=mbr --driveorder=sda,sdb,hda --append="net.ifnames=0 biosdevname=0 crashkernel=auto rhgb quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#%include /tmp/part-include
clearpart --all
part /boot --fstype=xfs --size=500
part pv.008018 --size=20480
volgroup VolGroup pv.008018
logvol /home --fstype=xfs --name=lv_home --vgname=VolGroup --grow --size=100
logvol / --fstype=xfs --name=lv_root --vgname=VolGroup --grow --size=10240 --maxsize=10240
logvol swap --name=lv_swap --vgname=VolGroup --grow --size=2048 --maxsize=2048
#part /mypart --grow --size=2028



%packages
kbd-1.15.5-10.el7.x86_64
centos-release-7-0.1406.el7.centos.2.3.x86_64
postfix-2.10.1-6.el7.x86_64
filesystem-3.2-18.el7.x86_64
tuned-2.3.0-11.el7.noarch
ncurses-base-5.9-13.20130511.el7.noarch
aic94xx-firmware-30-6.el7.noarch
kbd-misc-1.15.5-10.el7.noarch
irqbalance-1.0.6-5.el7.x86_64
tzdata-2014b-1.el7.noarch
openssh-clients-6.4p1-8.el7.x86_64
glibc-common-2.17-55.el7.x86_64
authconfig-6.2.8-8.el7.x86_64
xz-libs-5.1.2-8alpha.el7.x86_64
btrfs-progs-3.12-4.el7.x86_64
ncurses-libs-5.9-13.20130511.el7.x86_64
sudo-1.8.6p7-11.el7.x86_64
libsepol-2.1.9-3.el7.x86_64
iprutils-2.3.16-4.el7.x86_64
libselinux-2.2.2-6.el7.x86_64
iwl6000g2b-firmware-17.168.5.2-34.el7.noarch
info-5.1-4.el7.x86_64
iwl7260-firmware-22.0.7.0-34.el7.noarch
dbus-libs-1.6.12-8.el7.x86_64
libertas-sd8787-firmware-20140213-0.3.git4164c23.el7.noarch
sed-4.2.2-5.el7.x86_64
iwl6050-firmware-41.28.5.1-34.el7.noarch
chkconfig-1.3.61-4.el7.x86_64
iwl1000-firmware-39.31.5.1-34.el7.noarch
nspr-4.10.2-4.el7.x86_64
iwl6000-firmware-9.221.4.1-34.el7.noarch
nss-util-3.15.4-2.el7.x86_64
iwl2000-firmware-18.168.6.1-34.el7.noarch
grep-2.16-1.el7.x86_64
iwl5150-firmware-8.24.2.2-34.el7.noarch
gawk-4.0.2-4.el7.x86_64
iwl4965-firmware-228.61.2.24-34.el7.noarch
expat-2.1.0-8.el7.x86_64
iwl3160-firmware-22.0.7.0-34.el7.noarch
libattr-2.4.46-12.el7.x86_64
iwl3945-firmware-15.32.2.9-34.el7.noarch
libcap-2.22-8.el7.x86_64
audit-libs-2.4.1-5.el7.x86_64
libxml2-2.9.1-5.el7.x86_64
selinux-policy-3.13.1-23.el7_1.7.noarch
libgcrypt-1.5.3-4.el7.x86_64
device-mapper-1.02.93-3.el7.x86_64
lua-5.1.4-14.el7.x86_64
selinux-policy-targeted-3.13.1-23.el7_1.7.noarch
pkgconfig-0.27.1-4.el7.x86_64
checkpolicy-2.1.12-6.el7.x86_64
shared-mime-info-1.1-7.el7.x86_64
libcgroup-0.41-8.el7.x86_64
libcap-ng-0.7.3-5.el7.x86_64
setools-libs-3.3.7-46.el7.x86_64
libidn-1.28-3.el7.x86_64
docker-selinux-1.6.0-11.0.1.el7.centos.x86_64
gmp-5.1.1-5.el7.x86_64
device-mapper-event-1.02.93-3.el7.x86_64
p11-kit-0.18.7-4.el7.x86_64
pykickstart-1.99.43.17-1.el7.noarch
libdaemon-0.14-7.el7.x86_64
libcroco-0.6.8-5.el7.x86_64
libnl3-cli-3.2.21-6.el7.x86_64
cyrus-sasl-lib-2.1.26-17.el7.x86_64
groff-base-1.22.2-8.el7.x86_64
libunistring-0.9.3-9.el7.x86_64
diffutils-3.3-4.el7.x86_64
xz-5.1.2-8alpha.el7.x86_64
sysvinit-tools-2.88-14.dsf.el7.x86_64
newt-0.52.15-4.el7.x86_64
ethtool-3.8-3.el7.x86_64
hostname-3.13-3.el7.x86_64
gdbm-1.10-8.el7.x86_64
less-458-8.el7.x86_64
p11-kit-trust-0.18.7-4.el7.x86_64
nettle-2.7.1-2.el7.x86_64
gobject-introspection-1.36.0-4.el7.x86_64
gsettings-desktop-schemas-3.8.2-3.el7.x86_64
acl-2.2.51-12.el7.x86_64
elfutils-libs-0.158-3.el7.x86_64
mozjs17-17.0.0-10.el7.x86_64
pinentry-0.8.1-14.el7.x86_64
libselinux-utils-2.2.2-6.el7.x86_64
libedit-3.0-12.20121213cvs.el7.x86_64
libmodman-2.0.1-8.el7.x86_64
glib-networking-2.36.2-3.el7.x86_64
snappy-1.1.0-3.el7.x86_64
numactl-libs-2.0.9-2.el7.x86_64
libverto-0.2.5-4.el7.x86_64
libsemanage-2.1.10-16.el7.x86_64
krb5-libs-1.11.3-49.el7.x86_64
openldap-2.4.39-3.el7.x86_64
cracklib-2.9.0-11.el7.x86_64
libmount-2.23.2-16.el7.x86_64
systemd-libs-208-11.el7.x86_64
libpwquality-1.2.3-4.el7.x86_64
pam-1.1.8-9.el7.x86_64
shadow-utils-4.1.5.1-13.el7.x86_64
util-linux-2.23.2-16.el7.x86_64
python-libs-2.7.5-16.el7.x86_64
python-decorator-3.4.0-3.el7.noarch
gettext-0.18.2.1-4.el7.x86_64
centos-logos-70.0.6-1.el7.centos.noarch
dhcp-libs-4.2.5-27.el7.centos.x86_64
libselinux-python-2.2.2-6.el7.x86_64
python-slip-dbus-0.4.0-2.el7.noarch
pyliblzma-0.5.3-11.el7.x86_64
yum-metadata-parser-1.1.4-10.el7.x86_64
pyxattr-0.5.1-5.el7.x86_64
python-backports-ssl_match_hostname-3.4.0.2-4.el7.noarch
python-pyudev-0.15-6.el7.noarch
binutils-2.23.52.0.1-16.el7.x86_64
logrotate-3.8.6-4.el7.x86_64
alsa-lib-1.0.27.2-3.el7.x86_64
mariadb-libs-5.5.35-3.el7.x86_64
libcurl-7.29.0-19.el7.x86_64
python-urlgrabber-3.10-4.el7.noarch
rpm-libs-4.11.1-16.el7.x86_64
bind-libs-lite-9.9.4-14.el7.x86_64
fipscheck-1.4.1-5.el7.x86_64
json-c-0.11-3.el7.x86_64
virt-what-1.13-5.el7.x86_64
libnetfilter_conntrack-1.0.4-2.el7.x86_64
iproute-3.10.0-13.el7.x86_64
qrencode-libs-3.4.1-3.el7.x86_64
systemd-208-11.el7.x86_64
systemd-sysv-208-11.el7.x86_64
iputils-20121221-6.el7.x86_64
NetworkManager-glib-0.9.9.1-13.git20140326.4dba720.el7.x86_64
polkit-pkla-compat-0.1-4.el7.x86_64
cronie-anacron-1.4.11-11.el7.x86_64
crontabs-1.11-6.20121102git.el7.noarch
avahi-libs-0.6.31-13.el7.x86_64
avahi-autoipd-0.6.31-13.el7.x86_64
dnsmasq-2.66-12.el7.x86_64
ebtables-2.0.10-13.el7.x86_64
libpciaccess-0.13.1-4.1.el7.x86_64
fxload-2002_04_11-16.el7.x86_64
alsa-tools-firmware-1.0.27-4.el7.x86_64
libpipeline-1.2.3-3.el7.x86_64
gnupg2-2.0.22-3.el7.x86_64
rpm-python-4.11.1-16.el7.x86_64
pygpgme-0.3-9.el7.x86_64
yum-3.4.3-118.el7.centos.noarch
hardlink-1.0-19.el7.x86_64
dracut-network-033-161.el7.x86_64
plymouth-0.8.9-0.10.20140113.el7.centos.x86_64
teamd-1.9-15.el7.x86_64
libestr-0.1.9-2.el7.x86_64
NetworkManager-tui-0.9.9.1-13.git20140326.4dba720.el7.x86_64
kernel-3.10.0-123.el7.x86_64
dracut-config-rescue-033-161.el7.x86_64
man-db-2.6.3-9.el7.x86_64
lvm2-2.02.105-14.el7.x86_64
libgcc-4.8.2-16.el7.x86_64
setup-2.8.71-4.el7.noarch
microcode_ctl-2.1-7.1.el7.x86_64
basesystem-10.0-7.el7.centos.noarch
biosdevname-0.5.0-10.el7.x86_64
linux-firmware-20140213-0.3.git4164c23.el7.noarch
openssh-server-6.4p1-8.el7.x86_64
bind-license-9.9.4-14.el7.noarch
parted-3.1-17.el7.x86_64
nss-softokn-freebl-3.15.4-2.el7.x86_64
glibc-2.17-55.el7.x86_64
xfsprogs-3.2.0-0.10.alpha2.el7.x86_64
libstdc++-4.8.2-16.el7.x86_64
e2fsprogs-1.42.9-4.el7.x86_64
bash-4.2.45-5.el7.x86_64
passwd-0.79-4.el7.x86_64
pcre-8.32-12.el7.x86_64
tar-1.26-29.el7.x86_64
zlib-1.2.7-13.el7.x86_64
rootfiles-8.1-11.el7.noarch
iwl6000g2a-firmware-17.168.5.3-34.el7.noarch
libuuid-2.23.2-16.el7.x86_64
iwl2030-firmware-18.168.6.1-34.el7.noarch
popt-1.13-16.el7.x86_64
iwl100-firmware-39.31.5.1-34.el7.noarch
libcom_err-1.42.9-4.el7.x86_64
iwl135-firmware-18.168.6.1-34.el7.noarch
libdb-5.3.21-17.el7.x86_64
iwl105-firmware-18.168.6.1-34.el7.noarch
bzip2-libs-1.0.6-12.el7.x86_64
libertas-sd8686-firmware-20140213-0.3.git4164c23.el7.noarch
readline-6.2-9.el7.x86_64
ivtv-firmware-20080701-26.el7.noarch
elfutils-libelf-0.158-3.el7.x86_64
libertas-usb8388-firmware-20140213-0.3.git4164c23.el7.noarch
libgpg-error-1.12-3.el7.x86_64
iwl5000-firmware-8.83.5.1_1-34.el7.noarch
libacl-2.2.51-12.el7.x86_64
cpio-2.11-22.el7.x86_64
policycoreutils-2.2.5-15.el7.x86_64
libnl3-3.2.21-6.el7.x86_64
device-mapper-libs-1.02.93-3.el7.x86_64
sqlite-3.7.17-4.el7.x86_64
device-mapper-event-libs-1.02.93-3.el7.x86_64
libffi-3.0.13-11.el7.x86_64
audit-libs-python-2.4.1-5.el7.x86_64
glib2-2.36.3-5.el7.x86_64
libsemanage-python-2.1.10-16.el7.x86_64
dbus-glib-0.100-7.el7.x86_64
python-IPy-0.75-6.el7.noarch
findutils-4.5.11-3.el7.x86_64
policycoreutils-python-2.2.5-15.el7.x86_64
file-libs-5.11-21.el7.x86_64
docker-1.6.0-11.0.1.el7.centos.x86_64
libtasn1-3.3-3.el7.x86_64
audit-2.4.1-5.el7.x86_64
tcp_wrappers-libs-7.6-77.el7.x86_64
file-5.11-21.el7.x86_64
nss-softokn-3.15.4-2.el7.x86_64
libassuan-2.1.0-3.el7.x86_64
e2fsprogs-libs-1.42.9-4.el7.x86_64
which-2.20-7.el7.x86_64
libgomp-4.8.2-16.el7.x86_64
kmod-libs-14-9.el7.x86_64
libnfnetlink-1.0.1-4.el7.x86_64
slang-2.2.4-11.el7.x86_64
lzo-2.06-6.el7.x86_64
pciutils-libs-3.2.1-4.el7.x86_64
keyutils-libs-1.5.8-3.el7.x86_64
gettext-libs-0.18.2.1-4.el7.x86_64
libteam-1.9-15.el7.x86_64
ca-certificates-2013.1.95-71.el7.noarch
gnutls-3.1.18-8.el7.x86_64
ModemManager-glib-1.1.0-6.git20130913.el7.x86_64
vim-minimal-7.4.160-1.el7.x86_64
device-mapper-persistent-data-0.3.2-1.el7.x86_64
libdb-utils-5.3.21-17.el7.x86_64
libss-1.42.9-4.el7.x86_64
make-3.82-21.el7.x86_64
freetype-2.4.11-9.el7.x86_64
ncurses-5.9-13.20130511.el7.x86_64
libproxy-0.4.11-6.el7.x86_64
libsoup-2.42.2-3.el7.x86_64
libndp-1.2-4.el7.x86_64
libsysfs-2.1.0-16.el7.x86_64
ustr-1.0.4-16.el7.x86_64
nss-tools-3.15.4-6.el7.x86_64
openssl-libs-1.0.1e-34.el7.x86_64
gzip-1.5-7.el7.x86_64
cracklib-dicts-2.9.0-11.el7.x86_64
nss-3.15.4-6.el7.x86_64
libuser-0.60-5.el7.x86_64
coreutils-8.22-11.el7.x86_64
libblkid-2.23.2-16.el7.x86_64
libutempter-1.1.6-4.el7.x86_64
nss-sysinit-3.15.4-6.el7.x86_64
python-2.7.5-16.el7.x86_64
dbus-python-1.1.1-9.el7.x86_64
pygobject3-base-3.8.2-4.el7.x86_64
procps-ng-3.3.9-6.el7.x86_64
dhcp-common-4.2.5-27.el7.centos.x86_64
python-slip-0.4.0-2.el7.noarch
python-iniparse-0.4-9.el7.noarch
newt-python-0.52.15-4.el7.x86_64
python-configobj-4.7.2-7.el7.noarch
python-backports-1.0-6.el7.noarch
python-setuptools-0.9.8-3.el7.noarch
grubby-8.28-8.el7.x86_64
kmod-14-9.el7.x86_64
openssl-1.0.1e-34.el7.x86_64
plymouth-core-libs-0.8.9-0.10.20140113.el7.centos.x86_64
libssh2-1.4.3-8.el7.x86_64
python-pycurl-7.19.0-17.el7.x86_64
curl-7.29.0-19.el7.x86_64
rpm-4.11.1-16.el7.x86_64
fipscheck-lib-1.4.1-5.el7.x86_64
openssh-6.4p1-8.el7.x86_64
dmidecode-2.12-5.el7.x86_64
libmnl-1.0.3-7.el7.x86_64
iptables-1.4.21-13.el7.x86_64
libpcap-1.5.3-3.el7.x86_64
cryptsetup-libs-1.6.3-2.el7.x86_64
dbus-1.6.12-8.el7.x86_64
libgudev1-208-11.el7.x86_64
initscripts-9.49.17-1.el7.x86_64
dhclient-4.2.5-27.el7.centos.x86_64
polkit-0.112-5.el7.x86_64
os-prober-1.58-5.el7.x86_64
cronie-1.4.11-11.el7.x86_64
grub2-tools-2.02-0.2.10.el7.centos.1.x86_64
lvm2-libs-2.02.105-14.el7.x86_64
avahi-0.6.31-13.el7.x86_64
wpa_supplicant-2.0-12.el7.x86_64
ppp-2.4.5-33.el7.x86_64
hwdata-0.252-7.3.el7.noarch
libdrm-2.4.50-1.1.el7.x86_64
alsa-firmware-1.0.27-2.el7.noarch
kpartx-0.4.9-66.el7.x86_64
pth-2.0.7-22.el7.x86_64
rpm-build-libs-4.11.1-16.el7.x86_64
gpgme-1.3.2-5.el7.x86_64
yum-plugin-fastestmirror-1.1.31-24.el7.noarch
kernel-tools-libs-3.10.0-123.el7.x86_64
dracut-033-161.el7.x86_64
plymouth-scripts-0.8.9-0.10.20140113.el7.centos.x86_64
jansson-2.4-6.el7.x86_64
NetworkManager-0.9.9.1-13.git20140326.4dba720.el7.x86_64
rsyslog-7.4.7-6.el7.x86_64
kexec-tools-2.0.4-32.el7.centos.x86_64
grub2-2.02-0.2.10.el7.centos.1.x86_64
kernel-tools-3.10.0-123.el7.x86_64
firewalld-0.3.9-7.el7.noarch

%end
%post --nochroot
#!/bin/sh
set -x -v 
exec 1>/mnt/sysimage/root/ks-stage1.log 2>&1

echo "==> copying files ..."
cp -r /run/install/repo/once /mnt/sysimage/
%end


%post 
#!/bin/sh
set -x -v
exec 1>/root/ks-stage2.log 2>&1
PART=`mount -l | grep /boot | awk '{print $1}'`
DEVICE=${PART%?}
(echo n; echo p; echo 3; echo; echo; echo w) | fdisk $DEVICE
cp /once/swarm /usr/bin/
rm -f /etc/yum.repos.d/*
mv /once/OnceOS-Base.repo /etc/yum.repos.d/
bash /once/docker-status-collector/init
%end
